{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../results/results.component\";\nimport * as i4 from \"../film-results/film-results.component\";\nfunction SearchComponent_div_20_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-results\", 15);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"response\", ctx_r3.response)(\"hasData\", ctx_r3.hasData)(\"isTimedOut\", ctx_r3.isTimedOut);\n  }\n}\nfunction SearchComponent_div_20_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-film-results\", 15);\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"response\", ctx_r5.response)(\"hasData\", ctx_r5.hasData)(\"isTimedOut\", ctx_r5.isTimedOut);\n  }\n}\nfunction SearchComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, SearchComponent_div_20_ng_container_1_Template, 2, 3, \"ng-container\", 13);\n    i0.ɵɵtemplate(2, SearchComponent_div_20_ng_template_2_Template, 1, 3, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(3);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.category === \"people\")(\"ngIfElse\", _r4);\n  }\n}\nexport let SearchComponent = /*#__PURE__*/(() => {\n  class SearchComponent {\n    constructor(http) {\n      this.http = http;\n      this.response = [];\n      this.hasData = false;\n      this.hasUserQuery = false;\n      this.isTimedOut = false;\n    }\n    apiFetch(searchQuery, searchCat, event) {\n      event.preventDefault();\n      if (this.hasData) this.hasData = false;\n      this.isTimedOut = false;\n      this.category = searchCat;\n      this.hasUserQuery = true;\n      let headers = new HttpHeaders({});\n      this.http.get(`https://swapi.dev/api/${searchCat}/?search=${searchQuery}`, {\n        headers: headers\n      }).subscribe(data => {\n        this.response = data.results[0];\n        let insideInfo = data.results[0];\n        if (this.category === 'people') {\n          this.planetFetch(insideInfo.homeworld);\n        } else {\n          this.hasData = true;\n        }\n        console.log(this.response);\n      });\n    }\n    planetFetch(searchQuery) {\n      let headers = new HttpHeaders({});\n      this.http.get(searchQuery, {\n        headers: headers\n      }).subscribe(data => {\n        let planetInfo = data.name;\n        this.response.homeworld = planetInfo;\n        this.hasData = true;\n      });\n    }\n    static #_ = this.ɵfac = function SearchComponent_Factory(t) {\n      return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SearchComponent,\n      selectors: [[\"app-search\"]],\n      decls: 21,\n      vars: 1,\n      consts: [[1, \"search-bar\"], [3, \"submit\"], [\"name\", \"typeOfSearch\"], [\"typeOfSearch\", \"\"], [\"value\", \"people\"], [\"value\", \"films\"], [\"value\", \"planets\", \"disabled\", \"\"], [\"value\", \"species\", \"disabled\", \"\"], [\"value\", \"starships\", \"disabled\", \"\"], [\"value\", \"vehicles\", \"disabled\", \"\"], [\"type\", \"text\", \"placeholder\", \"search the galaxy\", \"required\", \"\", \"autofocus\", \"\"], [\"searchQuery\", \"\"], [4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"filmSearch\", \"\"], [3, \"response\", \"hasData\", \"isTimedOut\"]],\n      template: function SearchComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r6 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1);\n          i0.ɵɵlistener(\"submit\", function SearchComponent_Template_form_submit_1_listener($event) {\n            i0.ɵɵrestoreView(_r6);\n            const _r1 = i0.ɵɵreference(17);\n            const _r0 = i0.ɵɵreference(3);\n            ctx.apiFetch(_r1.value, _r0.value, $event);\n            return i0.ɵɵresetView(_r1.value = \"\");\n          });\n          i0.ɵɵelementStart(2, \"select\", 2, 3)(4, \"option\", 4);\n          i0.ɵɵtext(5, \"People\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"option\", 5);\n          i0.ɵɵtext(7, \"Film\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"option\", 6);\n          i0.ɵɵtext(9, \"Planets\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"option\", 7);\n          i0.ɵɵtext(11, \"Species\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"option\", 8);\n          i0.ɵɵtext(13, \"Starships\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"option\", 9);\n          i0.ɵɵtext(15, \"Vehicles\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(16, \"input\", 10, 11);\n          i0.ɵɵelementStart(18, \"button\");\n          i0.ɵɵtext(19, \"Engage the hyperdrive\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(20, SearchComponent_div_20_Template, 4, 2, \"div\", 12);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(20);\n          i0.ɵɵproperty(\"ngIf\", ctx.hasUserQuery);\n        }\n      },\n      dependencies: [i2.NgIf, i3.ResultsComponent, i4.FilmResultsComponent],\n      styles: [\".search-bar[_ngcontent-%COMP%]{background-color:#000000b8;display:flex;justify-content:center;margin:0 28rem 2rem;padding:1em 3em;border-radius:1rem}select[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin:.5rem;padding:1em;background-color:#363636;color:#ffe81f;border-radius:1em;font-size:1rem}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus{outline:none!important;border:1px solid #ffe81f;box-shadow:0 0 10px #fff383}\"]\n    });\n  }\n  return SearchComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}